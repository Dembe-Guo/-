# 第一章
* 数据库系统是由数据库、数据库管理系统、应用程序和数据库管理员组成的存储、管理、处理、和维护数据的系统。
* 数据库管理系统(DBMS)的功能
    * 数据定义功能
    * 数据组织，存储，和管理
    * 数据操纵功能
    * 数据库的事物管理和运行管理
    * 数据库的建立和维护功能
    * 通信功能，转换功能
* 数据库系统的构成
    * 数据库系统由数据库，数据库管理系统，应用程序和数据库管理员组成
* 数据库系统的特点
    * 数据结构化
    * 数据的共享度高、冗余度低、且易扩充
    * 数据独立性高
    * 数据由数据库管理系统统一管理和控制
* ER 图概念模型(第一类是概念模型、第二类是逻辑模型和物理模型)   
    * 概念模型世界上是现实世界到机器世界的一个中间层次
    * 逻辑模型有层次模型，网状模型，关系模型等。
* 实体间的类型
    * 实体之间的联系有一对一，一对多和多对多等多种类型
* 数据模型的组成要素
    * 数据结构，数据操作和数据的完整性约束条件三部分组成
* 数据库的三层模式结构
    * 外模式，模式，内模式
        * 模式也称逻辑模式，是数据库中的全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图
        * 外模式也称用户模式 是数据库用户的数据视图
        * 内模式也称储存模式，它是数据物理结构和存储方式的描述，是数据在数据库内部的组织方式
    * 一个数据库可以有多个外模式，但只能拥有一个内模式和模式
# 第二章
* 关系有哪几种类型
    * 基本关系（基本表），查询表和视图表
# 第三章
* 修改基本表
    * alter table (表名)
    * 删除基本表 默认RESTRICT 有限制条件
    CASCADE 无限制条件
* order by 排序 desc降序 asc 升序
* group by  分组
# 第四章
* 数据库安全是指保护数据库以防止不合法使用所造成的数据泄露、更新或破环。
* 自主存取方法：用户可以自主决定将数据的存取权限授予何人，决定是否也将“授权”的权限授予别人。
* 自主存储方法主要通过语句grant remoke来实现
# 第五章
* 数据库的完整性是指数据的正确性和相容性
* 完整性约束条件 包括not null, unique,primary key ,foreign key ,check 
* 完整性约束命名子句 constraint 名称  条件
* primary key (); 主码定义
* foreign key () references 表名(属性);外码定义
* constraint c1 check (sno between 100 and 99);
* constraint c2 not null  
* constraint s primary key ()
* drop constraint c1 
### 级联更新和级联删除
* foreign key (sno) references stuent(sno)
    on delete cascade
    on update cascade
* foreign key (sno) references student(sno)
    on delete no action 
    on update cascade 
### 触发器
create trigger add
on student 
for insert
as update class set toan=toan+1;
where classon=(select classon from inserted)
# 第六章
* 数据依赖是一个关系内部属性与属性之间的一种约束关系，这种属性是通过属性值的相等与否体现出来的数据间的相关联系
* 数据依赖中最重要的有函数依赖和多值依赖
* 若x->y 并对X中的任何一个真子集X` 都有x->y则y对x完全函数依赖
* 一个低一级范式关系模式通过模式分解可以转化为若干个高一级范式的关系模式的集合，这种过程就叫做规范化
关系
* 模式分解的三条不同的原则
    * 分解具有无损连接性
    * 分解要保存函数依赖
    * 分解既要保持函数依赖，又要具有无损连接

* 关系模式R(U，D，DOM,F)
r为关系名，u为组成该关系的属性名集合，D为U中属性所来自的域，Dom为属性项域的映像集合，F为属性间数据的依赖关系集合
* 范式
    * 1nf消除了非主键对码的部分函数依赖成为2nf
    * 2nf 消除了非主属性对码的传递函数依赖成为3nf
    * 3nf消除了主属性对码的部分和传递函数依赖成为bcnf
    * bcnf消除了非平凡且非函数以来的多值依赖

# 第七章
* 数据库设计的基本步骤
    * 需求分析
    * 概念结构设计
    * 逻辑结构设计
    * 物理结构设计
    * 数据库实施
    * 数据库运行和维护
* 一个实体性转化为一个关系模式
    * 将两个实体转化为关系模式之后，然后把任意实体的主键和联系的属性放到另一个实体的关系模式中
    * 将两个实体各自转化为关系模式后，然后把联系数量为1的实体的主键和联系的属性放到联系数量为n 的实体关系模式中
    * 将两个实体各自转换为关系模式后，然后把两个尸体的主键和联系的属性放到另一个关系模式中
# 第八章
* 嵌入式SQL是将SQL语句嵌入程序设计语言当中
* 被嵌入的程序设计语言称为主语言
* 主语言的三种通信方式
    * 向主语言的传递SQL语句的执行状态信息，主要用SQL通信区实现
    * 主语言向SQL语句提供参数
    * 将SQL语句查询数据库的结果交给主语言处理
* 主变量名前加:
* 有参存储过程 必须按照指定值的数据类型
* 存储过程的优点： 
    * 运行效率高，提供了在服务器端快速执行SQL语句的有效途径
    * 降低了客户机和服务器之间的通讯量。
    * 方便实施企业规则
# 第十章
* 事务的概念
    * 用户定义的一个数据库操作序列，这些操作要么全做，要么不做，是一个不可分割的工作单位
* 事务的特性
    * 原子性，一致性，隔离性，持续性（ACID)
* commit 表示提交，即提交事务的所有操作。具体就是将数据库中的所有对数据库的更新写回到磁盘上的物理数据库中去。
* rollback 表示回滚，系统将数据库中对数据库的所有已完成的操作全部撤销，回滚到事物开始时的状态。
* 故障种类
    * 事物内的故障  事务撤销undo
    * 系统故障      重做 redo
    * 介质故障       重装数据库
    * 计算机病毒
* 恢复的原理
    * 冗余
* 恢复的实现技术
    * 数据转储
    * 登记日志文件
* 备份的类型
    * 数据完整备份
    * 事务日志备份
    * 差异备份
    * 文件和文件组备份
* redo 重做 undo撤销
* 静态转储:系统中无运行事务时进行的转储操作
* 动态转储：转储期间可以进行存取和修改即转储和用户数据可以并发执行
* 海量转储：每次转储全部数据库
* 增量转储：转储上一次转出后更新的数据
* 日志文件的内容
    * 事务标识
    * 操作的类型
    * 操作对象
    * 更新前数据的旧值
    * 更新后数据的新值
* 日志文件的作用
    * 事务故障恢复和系统故障恢复必须用日志文件
    * 在动态转储方式中必须建立日志文件
    * 在静态转储方式中也可以建立日志文件
* 登记日志文件的原则
    * 登记的次序严格按照并发事务执行的时间次序
    * 必须先写日志文件 后写数据库
# 第十一章
* 排他锁 写锁 X锁
* 共享锁 读锁 S锁
* 一级封锁协议：事务在修改数据之前必须先加X锁
* 二级封锁协议： 事务在读取数据之前必须加S锁
* 三级封锁协议： 在一级封锁协议的基础上增加事务在读取数据之前必须加S锁

